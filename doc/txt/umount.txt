.. -*- mode: rst -*-

==========
Unmounting
==========

To unmount an S3QL file system, use the command::

 umount.s3ql [options] <mountpoint>

This will block until all data has been committed to the storage
backend.

Only the user who mounted the file system with `mount.s3ql` is able to
unmount it again. If you are root and want to unmount an S3QL file
system mounted by an ordinary user, you have to use the `fusermount
-u` or `umount` command instead. Note that these commands do not block
until all data has been uploaded, so if you use them instead of
`umount.s3ql` then you should manually wait for the `mount.s3ql`
process to terminate before shutting down the system.

You can specify the following options:

  --homedir=HOMEDIR  Directory for log files, cache and authentication
                     info. Default: `~/.s3ql`
  --debug=DEBUG      Activate debugging output from specified module. Use
                     `all` to get debug messages from all modules. This option
                     can be specified multiple times.
  --quiet            Be really quiet
  -z, --lazy         Lazy umount. Detaches the file system immediately, even
                     if there are still open files. The data will be uploaded
                     in the background once all open files have been closed.

If, for some reason, the `umount.sql` command does not work, the file
system can also be unmounted with `fusermount -u -z`. Note that this
command will return immediately and file system may continue to upload
data in the background for a while longer.
